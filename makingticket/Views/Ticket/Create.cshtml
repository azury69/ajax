@model TicketViewModel

<h2>Create Ticket</h2>

<div id="ticketContainer">
    @await Html.PartialAsync("_TicketCreate", Model)
</div>

<h2>Ticket List</h2>

<div id="listContainer">
    @await Html.PartialAsync("_TicketList", Model.Tickets)
</div>
@section Scripts{

<script>
    $(document).ready(function () {
        $("#createTicketForm").submit(function (e) {
            e.preventDefault(); // Prevent default form submission
            var formData = $(this).serialize();  // Serialize the form data

            $.ajax({
                url: "@Url.Action("Create", "Ticket")",  // The action to call on the server
                type: "POST",  // HTTP method (POST)
                data: formData,  // The form data to send
                success: function (response) {
                    if (response) {
                        alert("Ticket created successfully!");
                        $("#createTicketForm")[0].reset();  // Reset the form
                        $("#listContainer").html(response);  // Update ticket list in the #listContainer
                    } else {
                        alert("Error occurred while creating the ticket.");
                    }
                },
                error: function () {
                    alert("Error: Unable to submit the form.");
                }
            });
        });
    });
</script>

}
